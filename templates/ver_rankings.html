{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<link rel="stylesheet" href="{% static 'css/global.css' %}">
<link rel="stylesheet" href="{% static 'css/ver_rankings.css' %}">

<div class="container mt-5">
    <p class="text-center text-muted mb-5">Basado en la posición media de los personajes en todos los Tier Lists.</p>

    <div class="text-center mt-5 mb-5">
        <a href="/" class="btn-simpson">Volver al Inicio</a>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for item in ranking %}
            <div class="col">
                <div class="card h-100 shadow card-character text-center p-3">
                    <span class="badge bg-danger position-absolute top-0 start-0 m-2" style="font-size: 1.1rem;">
                        #{{ forloop.counter }}
                    </span>

                    <img src="
                            {% if 'http' in item.character.image %}{{ item.character.image }}{% else %}https://cdn.thesimpsonsapi.com/500{{ item.character.image }}{% endif %}"
                         class="card-img-top mx-auto"
                         style="height: 150px; width: auto; object-fit: contain;">

                    <div class="card-body">
                        <h5 class="card-title fw-bold">{{ item.character.name }}</h5>

                        <div class="alert alert-warning py-1 small">
                            Posición media: <strong>{{ item.posicion_media }}º</strong>
                        </div>

                        <p class="card-text small text-muted">
                            Basado en {{ item.total_listas }} listas
                        </p>
                    </div>

                </div>
            </div>
        {% endfor %}
    </div>

</div>
