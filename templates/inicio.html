<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% load static %}
<link rel="stylesheet" href="{% static 'css/global.css' %}">
<link rel="stylesheet" href="{% static 'css/inicio.css' %}">

<audio id="bg-music" loop>
    <source src="{% static 'audio/simpsons-theme.mp3' %}" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio.
</audio>

<div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
    <button id="music-control" class="btn btn-warning rounded-circle shadow" style="width: 50px; height: 50px;">
        <span id="music-icon">ðŸ”‡</span>
    </button>
</div>

<img src="{% static 'images/logo.png' %}" class="logo-centrado" alt="Logo">

<div class="text-center">
    {% if user.is_authenticated %}
        <h2 class="simpson-title">Â¡Hola, {{ user.nombre }}!</h2>
        <p class="text-white fw-bold" style="text-shadow: 2px 2px 0 #000;">Bienvenido a Springfield</p>
    {% else %}
        <h2 class="simpson-title">Â¡Ouch! No has iniciado sesiÃ³n</h2>
    {% endif %}
</div>

<div class="nav-simpson">

    <a href="/characters" class="btn-simpson"
       style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px;">
        <img src="{% static 'images/personajes.png' %}" style="max-width: 100%; max-height: 100%; object-fit: contain;"
             alt="Personajes">
    </a>

    {% if user.is_authenticated %}
        <a href="/categorias" class="btn-simpson"
           style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px;">
            <img src="{% static 'images/rankear.png' %}" style="max-width: 100%; max-height: 100%; object-fit: contain;"
                 alt="Rankear">
        </a>

        <a href="/ver_rankings" class="btn-simpson"
           style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px;">
            <img src="{% static 'images/ranking.png' %}" style="max-width: 100%; max-height: 100%; object-fit: contain;"
                 alt="Votos">
        </a>

        {% if user.rol == 'admin' %}
            <a href="/admin_resumen" class="btn-simpson"
               style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px; text-align: center; font-weight: bold; background-color: #ff69b4; color: white; border: 4px solid #fff; border-radius: 50px; text-shadow: 1px 1px 0 #000; box-shadow: 0 0 15px #ff69b4;">
                RESUMEN GENERAL
            </a>

            <a href="/gestion" class="btn-simpson"
               style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px; text-align: center; font-weight: bold; background-color: #ff69b4; color: white; border: 4px solid #fff; border-radius: 50px; text-shadow: 1px 1px 0 #000; box-shadow: 0 0 15px #ff69b4;">
                PANEL DE CONTROL
            </a>
        {% endif %}

        <a href="/logout" class="btn-simpson"
           style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center; padding: 5px;">
            <img src="{% static 'images/salir.png' %}" style="max-width: 100%; max-height: 100%; object-fit: contain;"
                 alt="Salir">
        </a>

    {% else %}
        <a href="/login" class="btn-simpson"
           style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center;">Login</a>
        <a href="/registro" class="btn-simpson"
           style="width: 200px; height: 100px; display: inline-flex; align-items: center; justify-content: center;">Registro</a>
    {% endif %}

</div>

<script>
    const music = document.getElementById('bg-music');
    const btn = document.getElementById('music-control');
    const icon = document.getElementById('music-icon');

    music.volume = 0.4;

    btn.addEventListener('click', function () {
        if (music.paused) {
            music.play();
            icon.innerText = 'ðŸ”Š';
            btn.classList.remove('btn-warning');
            btn.classList.add('btn-success');
        } else {
            music.pause();
            icon.innerText = 'ðŸ”‡';
            btn.classList.remove('btn-success');
            btn.classList.add('btn-warning');
        }
    });
</script>
