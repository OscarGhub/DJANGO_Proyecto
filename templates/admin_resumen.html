{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="{% static 'css/global.css' %}">

<body>
<div class="container mt-5">
    <div class="text-center mb-5">
        <a href="/" class="btn-simpson d-inline-block mt-2">Volver al Inicio</a>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mb-5">

        <div class="col">
            <div class="card h-100 card-character text-center shadow-sm p-3">
                <div class="card-body">
                    <h3 class="fw-bold text-primary">Usuarios</h3>
                    <h1 class="display-4 fw-bold">{{ total_usuarios }}</h1>
                    <div class="badge bg-info text-dark">Registrados</div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card h-100 card-character text-center shadow-sm p-3">
                <div class="card-body">
                    <h3 class="fw-bold text-warning">Personajes</h3>
                    <h1 class="display-4 fw-bold">{{ total_personajes }}</h1>
                    <div class="badge bg-info text-dark">En MongoDB</div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card h-100 card-character text-center shadow-sm p-3">
                <div class="card-body">
                    <h3 class="fw-bold text-success">Tier Lists</h3>
                    <h1 class="display-4 fw-bold">{{ total_rankings }}</h1>
                    <div class="badge bg-info text-dark">Completadas</div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card h-100 card-character text-center shadow-sm p-3">
                <div class="card-body">
                    <h3 class="fw-bold text-danger">Reviews</h3>
                    <h1 class="display-4 fw-bold">{{ total_reviews }}</h1>
                    <div class="badge bg-info text-dark">Totales</div>
                </div>
            </div>
        </div>

    </div>

    <div class="row g-4 justify-content-center">
        <div class="col-lg-8">
            <div class="card card-character shadow-sm p-4 h-100">
                <h3 class="fw-bold mb-4 text-center">üèÜ Personajes</h3>
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead>
                        <tr>
                            <th>Personaje</th>
                            <th class="text-center">Votos</th>
                            <th class="text-center">Puntuaci√≥n Media</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for p in top_5 %}
                            <tr>
                                <td class="fw-bold text-dark">{{ p.name }}</td>
                                <td class="text-center">{{ p.votos }}</td>
                                <td class="text-center">
                                    <span class="badge bg-warning text-dark fs-6">{{ p.media }}</span>
                                    ‚≠ê
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row g-4 justify-content-center mt-2 mb-5">
            <div class="col-lg-8">
                <div class="card card-character shadow-sm p-4 text-center">
                    <h3 class="fw-bold mb-3">üî• Categor√≠as m√°s Rankeadas</h3>
                    <div class="d-flex justify-content-center flex-wrap gap-3">
                        {% for cat in top_categorias %}
                            <div class="p-3 border rounded bg-white shadow-sm" style="min-width: 150px;">
                                <div class="text-muted small text-uppercase fw-bold">#{{ forloop.counter }}</div>
                                <div class="fw-bold fs-5 text-dark">{{ cat.name }}</div>
                                <div class="badge bg-success mt-2">{{ cat.total }} Tier Lists</div>
                            </div>
                        {% empty %}
                            <p class="text-muted">A√∫n no hay categor√≠as con rankings.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
</body>
